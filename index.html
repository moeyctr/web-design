<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Custom Snake Game</title>
<style>
  body {
    background-color: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: Arial, sans-serif;
    margin-top: 30px;
  }

  #gameCanvas {
    border: 3px solid #fff;
    background-color: #111;
  }

  #scoreContainer {
    color: #fff;
    margin-top: 10px;
    font-size: 20px;
  }

  #restartButton {
    margin-top: 10px;
    padding: 8px 16px;
    font-size: 16px;
    background-color: #555;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  #restartButton:hover {
    background-color: #777;
  }
</style>
</head>
<body>

<canvas id="gameCanvas" width="400" height="400"></canvas>
<div id="scoreContainer">Score: 0</div>
<button id="restartButton">Restart Game</button>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const scoreDisplay = document.getElementById('scoreContainer');
const restartBtn = document.getElementById('restartButton');

const gridSize = 20; // size of each block
let snake = [{x: 10, y: 10}]; // initial snake position
let dx = 0;
let dy = 0;
let food = {x: 5, y: 5};
let gameInterval;
let score = 0;
let speed = 200; // initial speed in ms

// Initialize game
function startGame() {
  // Reset variables
  snake = [{x: 10, y: 10}];
  dx = 0;
  dy = 0;
  score = 0;
  speed = 200;
  scoreDisplay.textContent = 'Score: ' + score;
  placeFood();
  clearInterval(gameInterval);
  gameInterval = setInterval(gameLoop, speed);
}

// Draw everything
function draw() {
  ctx.fillStyle = '#222'; // background color
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Draw snake
  ctx.fillStyle = '#00FF00'; // bright green
  for (let part of snake) {
    ctx.fillRect(part.x * gridSize, part.y * gridSize, gridSize, gridSize);
  }

  // Draw food
  ctx.fillStyle = '#FF0000'; // red
  ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);

  // Draw score
  ctx.fillStyle = '#fff';
  ctx.font = '16px Arial';
  ctx.fillText('Score: ' + score, 10, 20);
}

// Place food at random position not on snake
function placeFood() {
  do {
    food.x = Math.floor(Math.random() * (canvas.width / gridSize));
    food.y = Math.floor(Math.random() * (canvas.height / gridSize));
  } while (snake.some(part => part.x === food.x && part.y === food.y));
}

// Game loop
function gameLoop() {
  if (dx === 0 && dy === 0) {
    // Waiting for initial movement
    draw();
    return;
  }

  const head = {x: snake[0].x + dx, y: snake[0].y + dy};

  // Wall collision
  if (head.x < 0 || head.x >= canvas.width / gridSize || head.y < 0 || head.y >= canvas.height / gridSize) {
    gameOver();
    return;
  }

  // Self collision
  if (snake.some(part => part.x === head.x && part.y === head.y)) {
    gameOver();
    return;
  }

  snake.unshift(head);

  // Food eaten
  if (head.x === food.x && head.y === food.y) {
    score++;
    scoreDisplay.textContent = 'Score: ' + score;

    // Increase speed every 5 points
    if (score % 5 === 0 && speed > 50) {
      speed -= 20; // speed up
      clearInterval(gameInterval);
      gameInterval = setInterval(gameLoop, speed);
    }

    placeFood();
  } else {
    snake.pop();
  }

  draw();
}

// Handle game over
function gameOver() {
  clearInterval(gameInterval);
  ctx.fillStyle = 'rgba(0,0,0,0.7)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = '#fff';
  ctx.font = '30px Arial';
  ctx.textAlign = 'center';
  ctx.fillText('Game Over!', canvas.width / 2, canvas.height / 2 - 10);
  ctx.font = '20px Arial';
  ctx.fillText('Score: ' + score, canvas.width / 2, canvas.height / 2 + 20);
}

// Keyboard controls
document.addEventListener('keydown', e => {
  const LEFT = 37, UP = 38, RIGHT = 39, DOWN = 40;
  if (e.keyCode === LEFT && dx === 0) {
    dx = -1; dy = 0;
  } else if (e.keyCode === UP && dy === 0) {
    dx = 0; dy = -1;
  } else if (e.keyCode === RIGHT && dx === 0) {
    dx = 1; dy = 0;
  } else if (e.keyCode === DOWN && dy === 0) {
    dx = 0; dy = 1;
  }
});

// Restart button
document.getElementById('restartButton').addEventListener('click', startGame);

// Start the game initially
startGame();
</script>
</body>
</html>
